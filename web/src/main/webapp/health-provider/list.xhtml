<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Health Providers</title>
    <meta charset="UTF-8"/>
    <style>
        body{font-family:sans-serif;max-width:1200px;margin:24px auto;padding:0 16px}
        .btn{display:inline-block;padding:6px 12px;background:#1976d2;color:#fff;text-decoration:none;border-radius:4px;border:none;margin-right:8px}
        .btn:hover{background:#125aa0}
        table{width:100%;border-collapse:collapse;margin:16px 0}
        th,td{border:1px solid #ddd;padding:8px;text-align:left}
        th{background:#f5f5f5}
        .toolbar{margin:12px 0}
        .toolbar input{margin-right:8px;padding:6px}
    </style>
</h:head>
<h:body>
    <h1>Health Providers</h1>
    <h:messages id="msgs" globalOnly="true"/>

    <h:form id="searchForm" styleClass="toolbar">
        <h:inputText id="q" value="#{healthProviderBean.searchQuery}" placeholder="Search by name">
            <f:ajax event="keyup" listener="#{healthProviderBean.search}" render="results msgs"/>
        </h:inputText>
        <h:commandButton value="Search" actionListener="#{healthProviderBean.search}" styleClass="btn">
            <f:ajax render="results msgs"/>
        </h:commandButton>
        <h:commandButton value="Refresh" actionListener="#{healthProviderBean.loadAll}" styleClass="btn">
            <f:ajax render="results msgs"/>
        </h:commandButton>
        <h:link outcome="/health-provider/form" value="Add Health Provider" styleClass="btn"/>
        <h:link outcome="/index" value="Home" styleClass="btn"/>
    </h:form>

    <h:panelGroup id="results">
        <h:dataTable value="#{healthProviderBean.providers}" var="p" rendered="#{not empty healthProviderBean.providers}">
            <h:column><f:facet name="header">UUID</f:facet>#{p.id}</h:column>
            <h:column><f:facet name="header">Name</f:facet>#{p.name}</h:column>
            <h:column><f:facet name="header">Active</f:facet>#{p.active}</h:column>
            <h:column><f:facet name="header">Phone</f:facet>#{empty p.phone ? '-' : p.phone}</h:column>
            <h:column><f:facet name="header">Email</f:facet>#{empty p.email ? '-' : p.email}</h:column>
            <h:column><f:facet name="header">Registration</f:facet>#{p.registrationNumber}</h:column>
            <h:column><f:facet name="header">Registration Date</f:facet>#{p.registrationDate}</h:column>
        </h:dataTable>
        
        <h:panelGroup rendered="#{empty healthProviderBean.providers}">
            <p>No health providers found.</p>
        </h:panelGroup>
    </h:panelGroup>
</h:body>
</html>
