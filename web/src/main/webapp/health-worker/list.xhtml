<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Health Workers</title>
    <meta charset="UTF-8"/>
    <style>
        body{font-family:sans-serif;max-width:1200px;margin:24px auto;padding:0 16px}
        .btn{display:inline-block;padding:6px 12px;background:#1976d2;color:#fff;text-decoration:none;border-radius:4px;border:none;margin-right:8px}
        .btn:hover{background:#125aa0}
        table{width:100%;border-collapse:collapse;margin:16px 0}
        th,td{border:1px solid #ddd;padding:8px;text-align:left}
        th{background:#f5f5f5}
        .toolbar{margin:12px 0}
        .toolbar input{margin-right:8px;padding:6px}
    </style>
</h:head>
<h:body>
    <h1>Health Workers</h1>
    <h:messages id="msgs" globalOnly="true"/>

    <h:form id="searchForm" styleClass="toolbar">
        <h:inputText id="q" value="#{healthWorkerBean.searchQuery}" placeholder="Search by name">
            <f:ajax event="keyup" listener="#{healthWorkerBean.search}" render="results msgs"/>
        </h:inputText>
        <h:commandButton value="Search" actionListener="#{healthWorkerBean.search}" styleClass="btn">
            <f:ajax render="results msgs"/>
        </h:commandButton>
        <h:commandButton value="Refresh" actionListener="#{healthWorkerBean.loadAll}" styleClass="btn">
            <f:ajax render="results msgs"/>
        </h:commandButton>
        <h:link outcome="/health-worker/form" value="Add Health Worker" styleClass="btn"/>
        <h:link outcome="/index" value="Home" styleClass="btn"/>
    </h:form>

    <h:panelGroup id="results">
        <h:dataTable value="#{healthWorkerBean.workers}" var="w" rendered="#{not empty healthWorkerBean.workers}">
            <h:column><f:facet name="header">UUID</f:facet>#{w.id}</h:column>
            <h:column><f:facet name="header">DNI</f:facet>#{w.dni}</h:column>
            <h:column><f:facet name="header">Name</f:facet>#{w.lastName}, #{w.firstName}</h:column>
            <h:column><f:facet name="header">Gender</f:facet>#{w.gender}</h:column>
            <h:column><f:facet name="header">License</f:facet>#{w.licenseNumber}</h:column>
            <h:column><f:facet name="header">Specialty</f:facet>#{empty w.specialty ? '-' : w.specialty}</h:column>
            <h:column><f:facet name="header">Hire Date</f:facet>#{w.hireDate}</h:column>
        </h:dataTable>
        
        <h:panelGroup rendered="#{empty healthWorkerBean.workers}">
            <p>No health workers found.</p>
        </h:panelGroup>
    </h:panelGroup>
</h:body>
</html>
